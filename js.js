var gameContainer;
var mapFile = {"layers":[{"name":"world","tileset":"tile.png","data":[0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.6,9.4,9.4,9.4,9.4,9.4,9.4,9.4,9.4,9.4,9.4,9.4,6.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.6,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,6.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,6.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,6.6,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.6,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,6.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.6,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,6.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,6.6,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.2,15.4,6.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.6,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,6.6,0.8,0.8,0.8,0.8,0.8,0.8,3.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.6,15.4,15.2,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,15.4,6.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,3.12,0.8,0.8,0.8,0.8,0.8,0.8,9.4,15.4,9.4,15.4,9.4,15.4,9.4,15.4,9.4,15.4,9.4,15.4,9.4,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.13,7.13,8.13,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,9.5,0.8,6.13,7.13,8.13,0.8,0.8,0.8,0.8,0.8,0.8,6.13,7.13,8.13,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.14,7.14,8.14,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,9.6,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.15,7.15,8.15,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,9.7,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,16.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,16.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,9,9,9,9,9,9,9,9,9,9,9,9,9,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.13,7.13,8.13,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,3.12,0.8,0.12,0.8,0.8,0.8,0.8,0.12,9,9,9,9,9,9,9,9,9,9,9,9,9,0.8,0.8,0.8,0.8,0.8,0.8,6.13,7.13,8.13,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,9,9,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,6.15,7.15,8.15,0.8,0.8,9,9,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,6.13,7.13,8.13,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,9,9,16.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,6.13,7.14,7.14,8.14,0.8,0.8,0.8,0.8,6.13,7.13,8.13,0.8,17.6,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,6.14,7.14,7.14,8.14,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,6.13,7.13,8.13,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,6.15,7.14,7.14,8.14,0.8,0.8,0.8,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,9,9,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,9,9,9,9,9,9,9,9,9,9,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.13,7.13,8.13,0.8,0.8,0.8,0.8,0.8,9,9,9,9,9,9,9,9,9,9,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,3.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.14,7.14,8.14,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,6.15,7.15,8.15,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.12,0.8,0.8,0.8,0.8,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.12,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8,0.8]}],"tilesets":[{"name":"tile.png","image":"tile.png","imagewidth":480,"imageheight":256,"tilewidth":16,"tileheight":16}],"canvas":{"width":800,"height":608}};
$(function() {
    gameContainer = new Vue({
        el: '#gameContainer',
        data: {
            items: [],
            tileSize: mapFile.tilesets[0].tileheight,
            x: 5,
            y: 5,
            screenWidth:13,
            screenHeight:9,
            mapWidth: mapFile.tilesets["0"].imagewidth
        },
        methods: {
            buildGameContainer: function() {
                var content = [];
                for(var r=0;r<gameContainer.screenWidth;r++){
                    for(var c=0;c<gameContainer.screenHeight;c++){
                        var index = r*(gameContainer.mapWidth/gameContainer.tileSize)+c;
                        content.push(gameContainer.getMapFromIndex(index));
                    }
                }
                gameContainer.items = content;
            },
            getMapFromIndex: function(index) {
                var mapTile = mapFile.layers[0].data[index];
                return {
                    column:Math.floor(mapTile),
                    row : mapTile.toString().includes(".")? mapTile.toString().split(".")[1]:0
                };
            }
        }
    });
    
    gameContainer.buildGameContainer();
});

